// ============================================================================
// Markdown Editor Styles
// ============================================================================

.c-markdown-editor {
    border: 4px solid var(--black);
    background: var(--white);

    &__header {
        border-bottom: 3px solid var(--black);
        background: var(--gray-100);
    }

    &__tabs {
        display: flex;
        border-bottom: 2px solid var(--black);
    }

    &__tab {
        padding: 0.75rem 1.5rem;
        background: var(--gray-200);
        border: none;
        border-right: 2px solid var(--black);
        font-weight: 700;
        cursor: pointer;
        transition: all 0.15s ease-out;

        &:last-child {
            border-right: none;
        }

        &:hover {
            background: var(--gray-300);
        }

        &--active {
            background: var(--white);
            color: var(--navy-blue);
        }
    }

    &__toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.75rem;
        background: var(--white);
        border-bottom: 2px solid var(--black);
    }

    &__toolbar-btn {
        padding: 0.25rem 0.5rem;
        background: var(--gray-100);
        border: 2px solid var(--black);
        font-weight: 600;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.15s ease-out;

        &:hover {
            background: var(--gray-200);
            transform: translate(1px, 1px);
        }

        &:active {
            transform: translate(2px, 2px);
        }
    }

    &__content {
        min-height: 400px;
    }

    &__textarea {
        width: 100%;
        min-height: 400px;
        padding: 1rem;
        border: none;
        background: var(--white);
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.875rem;
        line-height: 1.6;
        resize: vertical;

        &:focus {
            outline: none;
        }
    }

    &__preview {
        padding: 1rem;
        min-height: 400px;
        background: var(--white);
        line-height: 1.6;

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-weight: 800;
            margin: 1.5rem 0 0.75rem 0;
            color: var(--black);

            &:first-child {
                margin-top: 0;
            }
        }

        h1 {
            font-size: 2rem;
            border-bottom: 3px solid var(--black);
            padding-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.5rem;
            border-bottom: 2px solid var(--gray-400);
            padding-bottom: 0.25rem;
        }

        h3 {
            font-size: 1.25rem;
        }

        p {
            margin: 0.75rem 0;
        }

        strong {
            font-weight: 800;
            color: var(--navy-blue);
        }

        em {
            font-style: italic;
            color: var(--gray-700);
        }

        code {
            background: var(--gray-100);
            padding: 0.125rem 0.25rem;
            border: 1px solid var(--gray-300);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875em;
        }

        pre {
            background: var(--gray-900);
            color: var(--white);
            padding: 1rem;
            border: 3px solid var(--black);
            overflow-x: auto;
            margin: 1rem 0;

            code {
                background: none;
                border: none;
                padding: 0;
                color: inherit;
            }
        }

        ul,
        ol {
            margin: 0.75rem 0;
            padding-left: 2rem;

            li {
                margin: 0.25rem 0;
            }
        }

        a {
            color: var(--navy-blue);
            text-decoration: underline;
            font-weight: 600;

            &:hover {
                color: var(--navy-blue-dark);
            }
        }

        img {
            max-width: 100%;
            height: auto;
            border: 3px solid var(--black);
            margin: 1rem 0;
        }

        blockquote {
            border-left: 4px solid var(--electric-pink);
            background: var(--gray-50);
            padding: 1rem;
            margin: 1rem 0;
            font-style: italic;
        }
    }

    &__help {
        border-top: 3px solid var(--black);
        background: var(--gray-50);
    }

    &__help-details {
        padding: 0;
    }

    &__help-summary {
        padding: 0.75rem 1rem;
        background: var(--gray-100);
        border: none;
        font-weight: 700;
        cursor: pointer;
        list-style: none;

        &:hover {
            background: var(--gray-200);
        }

        &::-webkit-details-marker {
            display: none;
        }

        &::before {
            content: "â–¶";
            margin-right: 0.5rem;
            transition: transform 0.15s ease-out;
        }
    }

    &__help-details[open] &__help-summary::before {
        transform: rotate(90deg);
    }

    &__help-content {
        padding: 1rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    &__help-section {
        h4 {
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            color: var(--navy-blue);
        }

        code {
            display: block;
            background: var(--gray-200);
            padding: 0.25rem 0.5rem;
            border: 2px solid var(--black);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            margin: 0.25rem 0;
            white-space: pre-wrap;
        }
    }

    // Responsive Design
    @media (max-width: 768px) {
        &__toolbar {
            gap: 0.25rem;
        }

        &__toolbar-btn {
            padding: 0.25rem 0.375rem;
            font-size: 0.625rem;
        }

        &__help-content {
            grid-template-columns: 1fr;
        }
    }
}

// Dark Mode Support
[data-theme="dark"] {
    .c-markdown-editor {
        background: var(--dark-surface);
        border-color: var(--dark-text);

        &__header {
            background: var(--dark-bg);
            border-color: var(--dark-text);
        }

        &__tabs {
            border-color: var(--dark-text);
        }

        &__tab {
            background: var(--dark-bg);
            color: var(--dark-text);
            border-color: var(--dark-text);

            &:hover {
                background: var(--dark-surface);
            }

            &--active {
                background: var(--dark-surface);
                color: var(--navy-blue-light);
            }
        }

        &__toolbar {
            background: var(--dark-surface);
        }

        &__toolbar-btn {
            background: var(--dark-bg);
            color: var(--dark-text);
            border-color: var(--dark-text);

            &:hover {
                background: var(--dark-surface);
            }
        }

        &__textarea,
        &__preview {
            background: var(--dark-surface);
            color: var(--dark-text);
        }

        &__preview {

            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                color: var(--dark-text);
            }

            h1 {
                border-color: var(--dark-text);
            }

            h2 {
                border-color: var(--gray-600);
            }

            strong {
                color: var(--navy-blue-light);
            }

            em {
                color: var(--gray-300);
            }

            code {
                background: var(--dark-bg);
                border-color: var(--gray-600);
                color: var(--dark-text);
            }

            pre {
                background: var(--black);
                border-color: var(--dark-text);
            }

            a {
                color: var(--navy-blue-light);

                &:hover {
                    color: var(--navy-blue);
                }
            }

            img {
                border-color: var(--dark-text);
            }

            blockquote {
                background: var(--dark-bg);
                color: var(--gray-300);
            }
        }

        &__help {
            background: var(--dark-bg);
            border-color: var(--dark-text);
        }

        &__help-summary {
            background: var(--dark-bg);
            color: var(--dark-text);

            &:hover {
                background: var(--dark-surface);
            }
        }

        &__help-content {
            background: var(--dark-surface);
        }

        &__help-section {
            h4 {
                color: var(--navy-blue-light);
            }

            code {
                background: var(--dark-bg);
                color: var(--dark-text);
                border-color: var(--dark-text);
            }
        }

        //============================================================================ // Image Upload Section
        // ============================================================================

        &__image-section {
            border-top: 2px solid var(--black);
            background: var(--gray-50);
            padding: 1rem;
        }

        &__image-upload-wrapper {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        &__image-label {
            font-weight: 700;
            color: var(--black);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        &__image-upload-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        &__image-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--white);
            border: 3px solid var(--black);
            box-shadow: 3px 3px 0px 0px var(--black);
            font-weight: 700;
            color: var(--black);
            text-decoration: none;
            transition: all 0.15s ease-out;
            cursor: pointer;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            align-self: flex-start;

            &:hover:not(:disabled) {
                transform: translate(-2px, -2px);
                box-shadow: 5px 5px 0px 0px var(--black);
            }

            &:active:not(:disabled) {
                transform: translate(0px, 0px);
                box-shadow: 2px 2px 0px 0px var(--black);
            }

            &:disabled {
                opacity: 0.6;
                cursor: not-allowed;
            }

            &--loading {
                background: var(--electric-pink);
                color: var(--white);
            }
        }

        &__image-help {
            font-size: 0.75rem;
            color: var(--gray-600);
            font-style: italic;
            line-height: 1.4;
        }

        &__file-input {
            display: none;
        }
    }
}